<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Installe le nouvel OS</title>

<style>
    body {
        font-family: Arial;
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-top: 40px;
    }

    #sequence {
        display: flex;
        gap: 30px;
        margin-bottom: 20px;
    }

    .arrow {
        width: 70px;
        height: 70px;
        opacity: 0.5;
    }

    .active {
        opacity: 1;
        border: 2px solid rgb(128, 0, 255);
        border-radius: 8px;
    }

    #info {
        margin-top: 20px;
        font-size: 20px;
        color: white;
        background: #333;
        padding: 10px 20px;
        border-radius: 8px;
    }
</style>
</head>

<body>

<h1>Installe le nouvel OS</h1>

<div id="sequence"></div>
<div id="info">Appuie sur les flèches du clavier pour commencer</div>

<script>
// ==== 1. Définition des flèches possibles ====
const arrows = [
    { key: "ArrowUp", img: "haut.jpg" },
    { key: "ArrowDown", img: "bas.jpg" },
    { key: "ArrowLeft", img: "gauche.jpg" },
    { key: "ArrowRight", img: "droite.jpg" }
];

// ==== 2. Générer une séquence aléatoire ====
const sequenceLength = 5;  // nombre de flèches
let sequence = [];
// séquence aléatoire pour mettre les flèches
function randomSequence() {
    sequence = [];
    for (let i = 0; i < sequenceLength; i++) {
        const r = Math.floor(Math.random() * arrows.length); // index aléatoire de arrows
        sequence.push(arrows[r]);
    }
}
randomSequence();

// ==== 3. Afficher la séquence ====
const container = document.getElementById("sequence"); // 

function displaySequence() {
    container.innerHTML = ""; // être sur qu'il n'y a rien
    sequence.forEach((arrow, index) => {
        let img = document.createElement("img");
        img.src = arrow.img; // charger l'image
        img.classList.add("arrow"); // charger son css
        if (index === 0) img.classList.add("active"); // première flèche active
        container.appendChild(img); // ajoute l'image au container pour être affiché
    });
}
displaySequence();

let position = 0; // flèche actuelle
const info = document.getElementById("info");

// ==== 4. Gérer les touches du clavier ====
document.addEventListener("keydown", (e) => {

    // Touche correcte ?
    if (e.key === sequence[position].key) {
        // valider l’étape
        container.children[position].classList.remove("active");
        position++;

        // si on a fini toute la séquence
        if (position >= sequence.length) {
            info.textContent = "succès Séquence validée";
            return;
        }

        // activer la suivante
        container.children[position].classList.add("active");

    } else {
        // Mauvaise touche
        info.textContent = "Échec — recommence";
        position = 0;
        displaySequence();
    }
});
</script>
</body>
</html>
