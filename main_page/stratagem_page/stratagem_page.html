<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'Ar√®ne - NIRD</title>
    <link rel="stylesheet" href="Style2.css">

    <script>
        // On v√©rifie si le badge "accesAutorise" existe
        //const badge = localStorage.getItem('accesAutorise');

        // Si le badge n'est pas √©gal √† "true"
        //if (badge !== 'true') {
        //    alert("Halte ! Tu dois passer par l'accueil pour entrer dans l'ar√®ne.");
        //    // On le renvoie √† la maison
        //    window.location.href = 'Phase2.html';
        //}
    </script>
</head>
<body class="bg-milieu">

    <nav class="menu">
        <a href="../Accueil_page/accueil_page.html">Accueil</a>
        <a href="../introduction_page.html">L'Ar√®ne</a>
        <a href="stratagem_page.html" class="actif">Jeux des fl√®ches</a>
        <a href="../Question_page/question_page.html"></a>
        <a href="../Type_page/type_page.html"></a>
        <a href="../Snake_page/snake_page.html"></a>
        <a href="../Final_page/final_page.html"></a>
    </nav>

    <div class="hero-content">
        <h1>L'Ar√®ne</h1>
        <button class="pomme" onclick=snake_score()>üçé</button>
        <p>Installe le nouvel OS</p>
        <div id="sequence"></div>
        <div id="info">Appuie sur les fl√®ches du clavier pour commencer</div>

        <script>
        // ==== 1. D√©finition des fl√®ches possibles ====
        const arrows = [
            { key: "ArrowUp", img: "../../Images/fleches/haut.jpg"},
            { key: "ArrowDown", img: "../../Images/fleches/bas.jpg"},
            { key: "ArrowLeft", img: "../../Images/fleches/gauche.jpg" },
            { key: "ArrowRight", img: "../../Images/fleches/droite.jpg" }
        ];

        // ==== 2. G√©n√©rer une s√©quence al√©atoire ====
        const sequenceLength = 5;  // nombre de fl√®ches
        let sequence = [];
        var verife = true;
        // s√©quence al√©atoire pour mettre les fl√®ches
        function randomSequence() {
            sequence = [];
            for (let i = 0; i < sequenceLength; i++) {
                const r = Math.floor(Math.random() * arrows.length); // index al√©atoire de arrows
                sequence.push(arrows[r]);
            }
        }
        randomSequence();

        // ==== 3. Afficher la s√©quence ====
        const container = document.getElementById("sequence"); // 

        function displaySequence() {
            container.innerHTML = ""; // √™tre sur qu'il n'y a rien
            sequence.forEach((arrow, index) => {
                let img = document.createElement("img");
                img.src = arrow.img; // charger l'image
                img.classList.add("arrow"); // charger son css
                if (index === 0) img.classList.add("active"); // premi√®re fl√®che active
                container.appendChild(img); // ajoute l'image au container pour √™tre affich√©
            });
        }
        displaySequence();

        let position = 0; // fl√®che actuelle
        const info = document.getElementById("info");

        // ==== 4. G√©rer les touches du clavier ====
        document.addEventListener("keydown", (e) => {

            // Touche correcte ?
            if (e.key === sequence[position].key) {
                // valider l‚Äô√©tape
                container.children[position].classList.remove("active");
                position++;

                // si on a fini toute la s√©quence
                if (position >= sequence.length) {
                    info.textContent = "S√©quence valid√©e";
                    return;
                }

                // activer la suivante
                container.children[position].classList.add("active");

            } else {
                // Mauvaise touche
                info.textContent = "√âchec ‚Äî recommence";
                position = 0;
                verife = false;
                displaySequence();
            }
        });

        if(verife){
            incrementer_game_score();
        }

        </script>
        <br>
        <a href="../question_page/question_page.html" class="btn-start" style="text-decoration:none; display:inline-block;">Page suivante</a>
    </div>

    <script src="Script2.js"></script>
    <script src="../game_score.js"></script>

</body>
</html>
