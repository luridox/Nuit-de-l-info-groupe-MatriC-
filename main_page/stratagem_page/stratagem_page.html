<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'Arène - NIRD</title>
    <link rel="stylesheet" href="Style2.css">

    <script>
        // On vérifie si le badge "accesAutorise" existe
        //const badge = localStorage.getItem('accesAutorise');

        // Si le badge n'est pas égal à "true"
        //if (badge !== 'true') {
        //    alert("Halte ! Tu dois passer par l'accueil pour entrer dans l'arène.");
        //    // On le renvoie à la maison
        //    window.location.href = 'Phase2.html';
        //}
    </script>
</head>
<body class="bg-milieu">

    <nav class="menu">
        <a href="../Accueil_page/accueil_page.html">Accueil</a>
        <a href="../introduction_page.html">L'Arène</a>
        <a href="stratagem_page.html" class="actif">Jeux des flèches</a>
        <a href="../Question_page/question_page.html">Questions</a>
        <a href="../Type_page/type_page.html">Recopier!!</a>
        <a href="../Snake_page/snake_page.html">Snake</a>
        <a href="../Final_page/final_page.html">Résultats</a>
    </nav>

    <div class="hero-content">
        <h1>L'Arène</h1>
        <p>Installe le nouvel OS</p>
        <div id="sequence"></div>
        <div id="info">Appuie sur les flèches du clavier pour commencer</div>

        <script>
        // ==== 1. Définition des flèches possibles ====
        const arrows = [
            { key: "ArrowUp", img: "../../Images/fleches/haut.jpg"},
            { key: "ArrowDown", img: "../../Images/fleches/bas.jpg"},
            { key: "ArrowLeft", img: "../../Images/fleches/gauche.jpg" },
            { key: "ArrowRight", img: "../../Images/fleches/droite.jpg" }
        ];

        // ==== 2. Générer une séquence aléatoire ====
        const sequenceLength = 5;  // nombre de flèches
        let sequence = [];
        // séquence aléatoire pour mettre les flèches
        function randomSequence() {
            sequence = [];
            for (let i = 0; i < sequenceLength; i++) {
                const r = Math.floor(Math.random() * arrows.length); // index aléatoire de arrows
                sequence.push(arrows[r]);
            }
        }
        randomSequence();

        // ==== 3. Afficher la séquence ====
        const container = document.getElementById("sequence"); // 

        function displaySequence() {
            container.innerHTML = ""; // être sur qu'il n'y a rien
            sequence.forEach((arrow, index) => {
                let img = document.createElement("img");
                img.src = arrow.img; // charger l'image
                img.classList.add("arrow"); // charger son css
                if (index === 0) img.classList.add("active"); // première flèche active
                container.appendChild(img); // ajoute l'image au container pour être affiché
            });
        }
        displaySequence();

        let position = 0; // flèche actuelle
        const info = document.getElementById("info");

        // ==== 4. Gérer les touches du clavier ====
        document.addEventListener("keydown", (e) => {

            // Touche correcte ?
            if (e.key === sequence[position].key) {
                // valider l’étape
                container.children[position].classList.remove("active");
                position++;

                // si on a fini toute la séquence
                if (position >= sequence.length) {
                    info.textContent = "Séquence validée";
                    return;
                }

                // activer la suivante
                container.children[position].classList.add("active");

            } else {
                // Mauvaise touche
                info.textContent = "Échec — recommence";
                position = 0;
                displaySequence();
            }
        });
        </script>
        <br>
        <a href="../question_page/Mini-jeux.html" class="btn-start" style="text-decoration:none; display:inline-block;">Page suivante</a>
    </div>

    <script src="Script2.js"></script>


</body>
</html>
